@model BMS_dotnet_WebApplication.Models.LibraryVM.SearchForBookVM
@{
    ViewData["Title"] = "Search Book";
}

<h1>Search for Books</h1>

@using (Html.BeginForm("SearchBook", "Library", FormMethod.Post))
{

    <div class="form-group">
        @Html.LabelFor(m => m.CategoryName)
        @Html.DropDownListFor(m => m.Categories, Model.Categories, "Select Category", new { @class = "form-control" })
       
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Barcode)
        @Html.TextBoxFor(m => m.Barcode, new { @class = "form-control" })
        @Html.HiddenFor(m => m.CategoryName)
           
       
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Title)
        @Html.TextBoxFor(m => m.Title, new { @class = "form-control" })
       
    </div>
    
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Search</button>
    </div>


    @if (Model.SearchedResult !=null && Model.SearchedResult.Any())
    {
        foreach (var book in Model.SearchedResult)
        {
            <div class="float-left book-card">
                <div class="card" style="width: 18rem;">
                    <img src="@Url.Action("GetImage",new {filename = "booksimg/"  + @book.MainImageFileName })" style=" width: 50px; height: 75px;" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">@book.Title</h5>
                        <div>
                            Barcode:  <span>@book.Barcode</span>
                            Description:  <span>@book.Description</span>
                            Comments:  <span>@book.Comments</span>
                            Number Of Copies:  <span>@book.NumberOfCopies</span>
                            Publisher:  <span>@book.Publisher</span>
                        </div>
                    </div>
                </div>
            </div>
            
            
        }
       
    }

@section Scripts
{
   
    <script>
        $("#Categories").on("change", function () {
            $("#CategoryName").val($(this).find("option:selected").text());
        });
    </script>

}

}